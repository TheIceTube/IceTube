{"version":3,"sources":["core/state.ts","core/utils.ts","content.json","coefficents.json","core/input.ts","core/timers.ts","core/audio.ts","core/gui.ts","../node_modules/stats.js/build/stats.min.js","core/entities/fish.ts","core/entities/penguin.ts","core/entities/player.ts","core/main.ts","core/FallersRain.ts","index.ts","../node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["module","exports","OVERLAY_ID","OldModule","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src2.77de5100.js","sourceRoot":"..\\src2","sourcesContent":["import { Penguin } from './entities/penguin';\r\nimport { Fish } from './entities/fish';\r\nimport { Player } from './entities/player';\r\n\r\n/**\r\n * Possible post themes\r\n */\r\ntype Theme = 'politics' | 'gaming' | 'music' | 'films' | 'educational' | 'sports';\r\n\r\n/**\r\n * Sctructure of the news post\r\n */\r\ninterface NewsBlock {\r\n\ttitle: string;\r\n\tcontent: string;\r\n\ttheme: Theme;\r\n\tfake: boolean;\r\n}\r\n\r\n/**\r\n * State of the game\r\n */\r\nexport interface GameState {\r\n\tpaused: boolean;\r\n\telement: HTMLCanvasElement;\r\n\tctx: CanvasRenderingContext2D;\r\n\r\n\tmouseX: number;\r\n\tmouseY: number;\r\n\tmouseDown: boolean;\r\n\r\n\tpenguins: Array<Penguin | Player>;\r\n\tentities: Array<Fish>;\r\n\tstarted: boolean;\r\n\r\n\tfish: number;\r\n\trelevance: number;\r\n\tscore: number;\r\n\tlevel: number;\r\n\r\n\tmoods: {\r\n\t\tmusic: number;\r\n\t\tsport: number;\r\n\t\tgaming: number;\r\n\t\tfilms: number;\r\n\t\tpolitics: number;\r\n\t\teducational: number;\r\n\t};\r\n\t\r\n\tcoefficents: {\r\n\t\trelevanceDeduction: number;\r\n\t\trelevanceAddition: number;\r\n\t\tmaximumPenguins: number;\r\n\t\tpenguinsMultiplier: number;\r\n\t\tpenguinsInvolvment: number;\r\n\t\tnewsUpadateDelay: number;\r\n\t\tfishDespawnFrames: number;\r\n\t};\r\n\r\n\t// tutorials: {\r\n\t// \tfakeTutorial: boolean;\r\n\t// \tpostTutorial: boolean;\r\n\t// };\r\n\r\n\tnews: NewsBlock[];\r\n\tnewsIndex: number;\r\n\tselectedNewsIndex: number;\r\n}\r\n\r\n/**\r\n * Global state manager\r\n * @param initial Initial state. Will be used if state initialized for the first time.\r\n */\r\nexport function State(initial?: GameState): GameState {\r\n\tconst global: any = window;\r\n\r\n\tif (typeof global.__GameState__ !== 'object') {\r\n\t\tglobal.__GameState__ = initial ? initial : {};\r\n\t}\r\n\r\n\treturn global.__GameState__;\r\n}\r\n","/**\r\n * Linear interpolation function\r\n * @param v0 Range start\r\n * @param v1 Range end\r\n * @param t Position in range ( from 0 to 1 )\r\n */\r\nexport function lerp(v0: number, v1: number, t: number): number {\r\n\treturn v0 * (1 - t) + v1 * t;\r\n}\r\n\r\n/**\r\n * Load audio file\r\n * @param src Audio path\r\n */\r\nexport function loadAudio(src: string): HTMLAudioElement {\r\n\tconst audio = new Audio(src);\r\n\treturn audio;\r\n}\r\n\r\n/**\r\n * Load image\r\n * @param src Image path\r\n */\r\nexport function loadImage(src: string): HTMLImageElement {\r\n\tconst image = new Image();\r\n\timage.src = src;\r\n\treturn image;\r\n}\r\n\r\n/**\r\n * Preload image\r\n * @param src Image path\r\n */\r\nexport function preloadImage(src: string): Promise<HTMLImageElement> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst image = new Image();\r\n\t\timage.onload = () => resolve(image);\r\n\t\timage.src = src;\r\n\t});\r\n}\r\n\r\n/**\r\n * Sort objects by field.\r\n * @param array Array to sort\r\n * @param field To sort by\r\n */\r\nexport function insertionSort(array: object[], field: string): object[] {\r\n\tfor (let i = 0; i < array.length; i++) {\r\n\t\tconst value = array[i] as any;\r\n\r\n\t\tfor (var j = i - 1; j > -1 && array[j][field] > value[field]; j--) {\r\n\t\t\tarray[j + 1] = array[j];\r\n\t\t}\r\n\r\n\t\tarray[j + 1] = value;\r\n\t}\r\n\r\n\treturn array;\r\n}\r\n\r\n/**\r\n * Generate random integer\r\n * @param min Minimal\r\n * @param max Maximal\r\n */\r\nexport function randomInteger(min: number, max: number): number {\r\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\n/**\r\n * Convert value from one range to another\r\n * @param {Number} value value to convert\r\n * @param {Object} oldRange min, max of values range\r\n * @param {Object} newRange min, max of desired range\r\n * @return {Number} value converted to other range\r\n */\r\nexport function convertRange(\r\n\tvalue: number,\r\n\toldRange: { min: number; max: number },\r\n\tnewRange: { min: number; max: number }\r\n) {\r\n\treturn ((value - oldRange.min) * (newRange.max - newRange.min)) / (oldRange.max - oldRange.min) + newRange.min;\r\n}\r\n\r\n/**\r\n * Shuffle array\r\n * Taken from https://stackoverflow.com/a/2450976/7442791\r\n * @param array Array to shuffle\r\n */\r\nexport function shuffle(array: any[]): any[] {\r\n\tlet currentIndex: number = array.length;\r\n\tlet temporaryValue: number;\r\n\tlet randomIndex: number;\r\n\r\n\twhile (0 !== currentIndex) {\r\n\t\trandomIndex = Math.floor(Math.random() * currentIndex);\r\n\t\tcurrentIndex -= 1;\r\n\r\n\t\ttemporaryValue = array[currentIndex];\r\n\t\tarray[currentIndex] = array[randomIndex];\r\n\t\tarray[randomIndex] = temporaryValue;\r\n\t}\r\n\r\n\treturn array;\r\n}\r\n\r\n/**\r\n * Get index of random value from array.\r\n * @param array Array to take from.\r\n */\r\nexport function randomFromArray(array: any[]): number {\r\n\treturn Math.floor(Math.random() * array.length);\r\n}\r\n\r\n/**\r\n * Add commas to number\r\n * @param number Number to add commas to\r\n */\r\nexport function numberWithCommas(num: number): string {\r\n\treturn num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n}\r\n\r\n/**\r\n * Calculate average value of all numbers\r\n * @param nums Array of number\r\n * @param floor Round returned value\r\n */\r\nexport function average(nums: number[], floor: boolean = true): number {\r\n\tconst result: number = nums.reduce((a, b) => a + b, 0) / nums.length;\r\n\treturn floor ? Math.floor(result) : result;\r\n}\r\n","module.exports = {\r\n\t\"real_news\": [\r\n\t\t{\r\n\t\t\t\"title\": \"U.S. Elections!\",\r\n\t\t\t\"content\": \"In a week we will know who will be the new president of the United States!\",\r\n\t\t\t\"theme\": \"politics\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"President elected\",\r\n\t\t\t\"content\": \"After recent president election, the winner take position\",\r\n\t\t\t\"theme\": \"politics\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"New President rules\",\r\n\t\t\t\"content\": \"New Statement from president came out!\",\r\n\t\t\t\"theme\": \"politics\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Britain post Brexit\",\r\n\t\t\t\"content\": \"What has been effected by it?\",\r\n\t\t\t\"theme\": \"politics\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Migrant stuck in Bosnia\",\r\n\t\t\t\"content\": \"What created such incident?\",\r\n\t\t\t\"theme\": \"politics\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"President - Vaccines have arrive!\",\r\n\t\t\t\"content\": \"What you should know about them?\",\r\n\t\t\t\"theme\": \"politics\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Cyberpunk 2077 released!\",\r\n\t\t\t\"content\": \"One of the best upcoming games has been finaly released.\",\r\n\t\t\t\"theme\": \"gaming\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Steam winter sale ends soon\",\r\n\t\t\t\"content\": \"Quick grab some game on cheap price!\",\r\n\t\t\t\"theme\": \"gaming\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Minecraft 2 confirmed!\",\r\n\t\t\t\"content\": \"Markus Person confirmed that Minecraft 2 already in development\",\r\n\t\t\t\"theme\": \"gaming\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"New Fallout game to be released!\",\r\n\t\t\t\"content\": \"Will franchise rise again after the 76 massive fail?\",\r\n\t\t\t\"theme\": \"gaming\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Club Penguin 2 in making! \",\r\n\t\t\t\"content\": \"Creators confirm, its real!\",\r\n\t\t\t\"theme\": \"gaming\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"New Minecraft update soon.\",\r\n\t\t\t\"content\": \"What changes will there be?\",\r\n\t\t\t\"theme\": \"gaming\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Lil Pump has made new song!\",\r\n\t\t\t\"content\": \"The new song is titled Adidas Gang\",\r\n\t\t\t\"theme\": \"music\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Grammys delayed due Covid-19\",\r\n\t\t\t\"content\": \"Due to Covid-19 pandemic, grammy awards are delayed!\",\r\n\t\t\t\"theme\": \"music\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"New James Bond music is top  class.\",\r\n\t\t\t\"content\": \"Song titled NO.TIME.TO.DIE brings new light into Jame bond films!.\",\r\n\t\t\t\"theme\": \"music\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"All I want for christmas - best song of generation?\",\r\n\t\t\t\"content\": \"Will there ever be end to it?\",\r\n\t\t\t\"theme\": \"music\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Dr. Dre in Hospital!\",\r\n\t\t\t\"content\": \"What happened and should you be woried?\",\r\n\t\t\t\"theme\": \"music\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"New Ed Sheeran album released\",\r\n\t\t\t\"content\": \"What now he has to offer?\",\r\n\t\t\t\"theme\": \"music\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"New Avengers movies to come soon!\",\r\n\t\t\t\"content\": \"Marvel announced that Avengers cast will return soon\",\r\n\t\t\t\"theme\": \"films\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"New Star Wars movies announced!\",\r\n\t\t\t\"content\": \"Will they be as bad as last 3?\",\r\n\t\t\t\"theme\": \"films\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Petions made to ban Musicals in movies\",\r\n\t\t\t\"content\": \"More then 100 000 000 sigantures have been colected\",\r\n\t\t\t\"theme\": [\"films\"],\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"New DC movies annouced!\",\r\n\t\t\t\"content\": \"Will it ever be as popular as Marvels films?\",\r\n\t\t\t\"theme\": \"films\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"New documentary about WW2, has been released!\",\r\n\t\t\t\"content\": \"What new insights to be found?\",\r\n\t\t\t\"theme\": \"films\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Latvian movie recieves oscar!!\",\r\n\t\t\t\"content\": \"Shock? What? How?\",\r\n\t\t\t\"theme\": \"films\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Scientist found new large Meteor.\",\r\n\t\t\t\"content\": \"What can we learn about it?\",\r\n\t\t\t\"theme\": \"educational\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"How to study and concentrate better in School\",\r\n\t\t\t\"content\": \"Tip and Tricks!\",\r\n\t\t\t\"theme\": \"educational\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"DIY Hacks for Daily life\",\r\n\t\t\t\"content\": \"Top 10 Hacks that you ...\",\r\n\t\t\t\"theme\": \"educational\",\r\n\t\t\t\"fake\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Maximum speed of human?\",\r\n\t\t\t\"content\": \"Scientist doing reasearch of how fast can human run.\",\r\n\t\t\t\"theme\": \"educational\",\r\n\t\t\t\"fake\": false\r\n\t\t}\r\n\t],\r\n\t\"fake_news\": [\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"title\": \"Fake\",\r\n\t\t\t\"content\": \"FakeNews\",\r\n\t\t\t\"theme\": \"FakeNews\",\r\n\t\t\t\"fake\": true\r\n\t\t}\r\n\t]\r\n}\r\n;","module.exports = {\r\n\t\"moods\": {\r\n\t\t\"music\": 11,\r\n\t\t\"sport\": 9,\r\n\t\t\"gaming\": 7,\r\n\t\t\"films\": 5,\r\n\t\t\"politics\": 3,\r\n\t\t\"educational\": 1\r\n\t},\r\n\t\"levels\": [\r\n\t\t{\r\n\t\t\t\"level\": 0,\r\n\t\t\t\"score\": 0,\r\n\t\t\t\"relevanceDeduction\": 0,\r\n\t\t\t\"relevanceAddition\": 0.5,\r\n\t\t\t\"maximumPenguins\": 20,\r\n\t\t\t\"penguinsMultiplier\": 0.1,\r\n\t\t\t\"penguinsInvolvment\": 0.01,\r\n\t\t\t\"newsUpadateDelay\": 10000,\r\n\t\t\t\"fishDespawnFrames\": 200\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"level\": 1,\r\n\t\t\t\"score\": 0.01,\r\n\t\t\t\"relevanceDeduction\": 0.02,\r\n\t\t\t\"relevanceAddition\": 0.4,\r\n\t\t\t\"maximumPenguins\": 20,\r\n\t\t\t\"penguinsMultiplier\": 0.1,\r\n\t\t\t\"penguinsInvolvment\": 0.05,\r\n\t\t\t\"newsUpadateDelay\": 9000,\r\n\t\t\t\"fishDespawnFrames\": 175\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"level\": 2,\r\n\t\t\t\"score\": 2,\r\n\t\t\t\"relevanceDeduction\": 0.025,\r\n\t\t\t\"relevanceAddition\": 0.35,\r\n\t\t\t\"maximumPenguins\": 40,\r\n\t\t\t\"penguinsMultiplier\": 0.11,\r\n\t\t\t\"penguinsInvolvment\": 0.05,\r\n\t\t\t\"newsUpadateDelay\": 8000,\r\n\t\t\t\"fishDespawnFrames\": 150\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"level\": 3,\r\n\t\t\t\"score\": 4,\r\n\t\t\t\"relevanceDeduction\": 0.04,\r\n\t\t\t\"relevanceAddition\": 0.3,\r\n\t\t\t\"maximumPenguins\": 80,\r\n\t\t\t\"penguinsMultiplier\": 0.12,\r\n\t\t\t\"penguinsInvolvment\": 0.1,\r\n\t\t\t\"newsUpadateDelay\": 7000,\r\n\t\t\t\"fishDespawnFrames\": 125\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"level\": 4,\r\n\t\t\t\"score\": 6,\r\n\t\t\t\"relevanceDeduction\": 0.06,\r\n\t\t\t\"relevanceAddition\": 0.3,\r\n\t\t\t\"maximumPenguins\": 160,\r\n\t\t\t\"penguinsMultiplier\": 0.14,\r\n\t\t\t\"penguinsInvolvment\": 0.2,\r\n\t\t\t\"newsUpadateDelay\": 6000,\r\n\t\t\t\"fishDespawnFrames\": 100\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"level\": 5,\r\n\t\t\t\"score\": 8,\r\n\t\t\t\"relevanceDeduction\": 0.1,\r\n\t\t\t\"relevanceAddition\": 0.3,\r\n\t\t\t\"maximumPenguins\": 320,\r\n\t\t\t\"penguinsMultiplier\": 0.15,\r\n\t\t\t\"penguinsInvolvment\": 0.3,\r\n\t\t\t\"newsUpadateDelay\": 5000,\r\n\t\t\t\"fishDespawnFrames\": 75\r\n\t\t}\r\n\r\n\t]\r\n};","import { State, GameState } from './state';\r\n\r\n// Get game state\r\nconst GAME: GameState = State();\r\n\r\n// On window resize\r\nwindow.addEventListener('resize', () => {\r\n\tGAME.element.width = window.innerWidth * window.devicePixelRatio;\r\n    GAME.element.height = window.innerHeight * window.devicePixelRatio;\r\n});\r\n\r\n// Mouse position calculation\r\nGAME.element.addEventListener('mousemove', event => {\r\n\tconst rect: DOMRect = GAME.element.getBoundingClientRect();\r\n\tGAME.mouseX = ((event.clientX - rect.left) / (rect.right - rect.left)) * GAME.element.width;\r\n\tGAME.mouseY = ((event.clientY - rect.top) / (rect.bottom - rect.top)) * GAME.element.height;\r\n});\r\n\r\n// On mouse down\r\nGAME.element.addEventListener('mousedown', () => {\r\n\tGAME.mouseDown = true;\r\n});\r\n\r\n// On mouse up\r\nGAME.element.addEventListener('mouseup', () => {\r\n\tGAME.mouseDown = false;\r\n});\r\n","import { State, GameState } from './state';\r\n\r\n// Get state\r\nconst GAME: GameState = State();\r\n\r\n/**\r\n * Alternative to `setInterval`, but using request animation frame\r\n * @param callback Callback that will be executed after delay\r\n * @param delay Delay before executing\r\n */\r\nexport function requestInterval(callback: () => void, delay: number = 0): (newDelay?: number) => void {\r\n\tlet start: number = Date.now();\r\n\tlet passed: number = 0;\r\n\tlet canceled: boolean = false;\r\n\r\n\tconst loop = () => {\r\n\t\tconst current = Date.now();\r\n\r\n\t\t// Stop interval if its canceled\r\n\t\tif (canceled) return;\r\n\r\n\t\t// If game paused\r\n\t\tif (GAME.paused) {\r\n\t\t\tstart = current;\r\n\t\t\twindow.requestAnimationFrame(loop);\r\n\t\t\treturn\r\n\t\t};\r\n\r\n\t\tpassed += current - start;\r\n\t\tstart = current;\r\n\t\t\r\n\t\tif (passed >= delay) {\r\n\t\t\tcallback();\r\n\t\t\tpassed = 0;\r\n\t\t}\r\n\t\t\r\n\t\twindow.requestAnimationFrame(loop);\r\n\t}\r\n\r\n\t\r\n\tloop();\r\n\r\n\treturn newDelay => {\r\n\t\tif (newDelay) {\r\n\t\t\tdelay = newDelay;\r\n\t\t} else {\r\n\t\t\tcanceled = true;\r\n\t\t}\r\n\t};\r\n}\r\n\r\n/**\r\n * Alternative to `setTimeout`, but using request animation frame\r\n * @param callback Callback that will be executed after delay\r\n * @param delay Delay before executing\r\n */\r\nexport function requestTimeout(callback: () => void, delay: number = 0): () => void {\r\n\tlet start: number = Date.now();\r\n\tlet passed: number = 0;\r\n\tlet canceled: boolean = false;\r\n\r\n\tconst loop = () => {\r\n\t\tconst current = Date.now();\r\n\r\n\t\t// Stop interval if its canceled\r\n\t\tif (canceled) return;\r\n\r\n\t\t// If game paused\r\n\t\tif (GAME.paused) {\r\n\t\t\tstart = current;\r\n\t\t\twindow.requestAnimationFrame(loop);\r\n\t\t\treturn\r\n\t\t};\r\n\r\n\t\tpassed += current - start;\r\n\t\tstart = current;\r\n\t\t\r\n\t\tif (passed >= delay) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.requestAnimationFrame(loop);\r\n\t}\r\n\r\n\tloop();\r\n\r\n\treturn () => {\r\n\t\tcanceled = true;\r\n\t};\r\n}","import { requestTimeout } from './timers';\r\n\r\n// Sounds\r\nimport musicSound from '../sounds/music.mp3';\r\n\r\nimport popSound from '../sounds/pop.mp3';\r\nimport moveSound from '../sounds/move.mp3';\r\nimport paperSound from '../sounds/paper.mp3';\r\nimport clickSound from '../sounds/click.mp3';\r\nimport click2Sound from '../sounds/click2.mp3';\r\nimport speachSound from '../sounds/speach.mp3';\r\nimport sirenSound from '../sounds/siren.mp3';\r\n\r\n // Pop sound\r\nlet popIndex: number = 0;\r\nconst pops = [];\r\nfor (let i = 0; i < 5; i++) pops.push(new Audio(popSound)); \r\n\r\n/**\r\n * Pop sound\r\n */\r\nexport function playPopSound(): void {\r\n    const sound = pops[popIndex];\r\n\r\n    requestTimeout(() => {\r\n        sound.volume = 0.1;\r\n        sound.play();\r\n\r\n        popIndex += 1;\r\n        if (popIndex >= pops.length) popIndex = 0;\r\n    }, 20);\r\n}\r\n\r\n/**\r\n * Click sound\r\n */\r\nexport function playClickSound(): void {\r\n    const audio = new Audio(clickSound);\r\n    audio.volume = 0.1;\r\n    audio.play();\r\n}\r\n\r\n/**\r\n * Click sound\r\n */\r\nexport function playClick2Sound(): void {\r\n    const audio = new Audio(click2Sound);\r\n    audio.volume = 0.1;\r\n    audio.play();\r\n}\r\n\r\n/**\r\n * Speach sound\r\n */\r\nexport function playSpeachSound(): void {\r\n    const audio = new Audio(speachSound);\r\n    audio.volume = 0.05;\r\n    audio.play();\r\n}\r\n\r\n/**\r\n * Move sound\r\n */\r\nexport function playMoveSound(): void {\r\n    const audio = new Audio(moveSound);\r\n    audio.volume = 0.1;\r\n    audio.play();\r\n}\r\n\r\n/**\r\n * Paper sound\r\n */\r\nexport function playPaperSound(): void {\r\n    const audio = new Audio(paperSound);\r\n    audio.volume = 0.5;\r\n    audio.play();\r\n}\r\n\r\n/**\r\n * Paper sound\r\n */\r\nexport function playSirenSound(): void {\r\n    const audio = new Audio(sirenSound);\r\n    audio.volume = 0.1;\r\n    audio.play();\r\n}\r\n\r\n/**\r\n * Paper sound\r\n */\r\nexport function startMusic(): void {\r\n    const audio = new Audio(musicSound);\r\n    audio.volume = 0.5;\r\n    audio.loop = true;\r\n    audio.play();\r\n}","import { Player } from './entities/player';\r\nimport { State, GameState } from './state';\r\nimport { requestInterval } from './timers';\r\nimport { numberWithCommas, randomFromArray, randomInteger } from './utils';\r\nimport { playClickSound, playClick2Sound, playMoveSound, playPaperSound, playSirenSound } from './audio';\r\n\r\n// Get state\r\nconst GAME: GameState = State();\r\n\r\n// Elements\r\nconst news = document.getElementById('news');\r\nconst overlay = document.getElementById('overlay');\r\nconst counter = document.getElementById('counter');\r\nconst pauseMenu = document.getElementById('pause-menu');\r\nconst postModal = document.getElementById('post-modal');\r\nconst mood = document.getElementById('mood') as HTMLInputElement;\r\nconst selectedNews = document.getElementById('selected');\r\nconst relevanceBar = document.getElementById('relevance-bar');\r\n\r\n// Buttons\r\nconst gamingButton = document.getElementById('gaming');\r\nconst educationalButton = document.getElementById('educational');\r\nconst politicsButton = document.getElementById('politics');\r\nconst filmsButton = document.getElementById('films');\r\nconst musicButton = document.getElementById('music');\r\nconst sportButton = document.getElementById('sport');\r\nconst postButton = document.getElementById('post') as HTMLButtonElement;\r\n\r\n// Update GUI elements\r\nrequestInterval(() => {\r\n\t// Fish counter\r\n\tcounter.innerText = numberWithCommas(GAME.fish);\r\n\r\n\t// Bar width\r\n\tlet revelance: number = Math.floor(GAME.relevance * 50);\r\n\tif (revelance > 100) revelance = 100;\r\n\trelevanceBar.style.width = `${revelance}%`;\r\n\r\n\t// Bar color\r\n\tif (revelance < 33) {\r\n\t\trelevanceBar.style.backgroundColor = '#f35858';\r\n\t} else if (revelance > 66) {\r\n\t\trelevanceBar.style.backgroundColor = '#5ef358';\r\n\t} else {\r\n\t\trelevanceBar.style.backgroundColor = '#5893f3';\r\n\t}\r\n}, 100);\r\n\r\n// Request news block\r\nrequestInterval(() => {\r\n\tplayMoveSound();\r\n\tnextNewsBlock();\r\n}, 2000);\r\n\r\n// New post creating\r\npostButton.addEventListener('click', () => {\r\n\tplayPaperSound();\r\n\tplayClickSound();\r\n\tcreatePost();\r\n\thideModals();\r\n});\r\n\r\n// Hide modals in overlay click\r\noverlay.addEventListener('click', () => {\r\n\tplayClick2Sound();\r\n\thideModals();\r\n});\r\n\r\n// Pause menu on Escape press\r\nwindow.addEventListener('keydown', event => {\r\n\tif (event.key === 'Escape') {\r\n\t\tif (GAME.paused) {\r\n\t\t\tGAME.paused = false;\r\n\t\t\thideModals();\r\n\t\t} else {\r\n\t\t\tGAME.paused = true;\r\n\t\t\tpauseMenu.style.display = 'block';\r\n\t\t\toverlay.style.opacity = '1';\r\n\t\t\toverlay.style.pointerEvents = 'auto';\r\n\t\t}\r\n\t}\r\n});\r\n\r\n//Buttons for the new post thingy\r\ngamingButton.addEventListener('click', () => {\r\n\tunpressButtons();\r\n\tplayClickSound();\r\n\tpostButton.disabled = false;\r\n\tgamingButton.classList.contains('active') ? gamingButton.classList.remove('active') : gamingButton.classList.add('active');\r\n});\r\n\r\neducationalButton.addEventListener('click', () => {\r\n\tunpressButtons();\r\n\tplayClickSound();\r\n\tpostButton.disabled = false;\r\n\teducationalButton.classList.contains('active') ? educationalButton.classList.remove('active') : educationalButton.classList.add('active');\r\n});\r\n\r\n// Film theme selection\r\nfilmsButton.addEventListener('click', () => {\r\n\tunpressButtons();\r\n\tplayClickSound();\r\n\tpostButton.disabled = false;\r\n\tfilmsButton.classList.contains('active') ? filmsButton.classList.remove('active') : filmsButton.classList.add('active');\r\n});\r\n\r\n// Politics theme selection\r\npoliticsButton.addEventListener('click', () => {\r\n\tunpressButtons();\r\n\tplayClickSound();\r\n\tpostButton.disabled = false;\r\n\tpoliticsButton.classList.contains('active') ? politicsButton.classList.remove('active') : politicsButton.classList.add('active');\r\n});\r\n\r\n// Music theme selection\r\nmusicButton.addEventListener('click', () => {\r\n\tunpressButtons();\r\n\tplayClickSound();\r\n\tpostButton.disabled = false;\r\n\tmusicButton.classList.contains('active') ? musicButton.classList.remove('active') : musicButton.classList.add('active');\r\n});\r\n\r\n// Sports theme selection\r\nsportButton.addEventListener('click', () => {\r\n\tunpressButtons();\r\n\tplayClickSound();\r\n\tpostButton.disabled = false;\r\n\tsportButton.classList.contains('active') ? sportButton.classList.remove('active') : sportButton.classList.add('active');\r\n});\r\n\r\n/**\r\n * Unpress all theme buttons\r\n */\r\nfunction unpressButtons(): void {\r\n\tgamingButton.classList.remove('active');\r\n\teducationalButton.classList.remove('active');\r\n\tfilmsButton.classList.remove('active');\r\n\tpoliticsButton.classList.remove('active');\r\n\tmusicButton.classList.remove('active');\r\n\tsportButton.classList.remove('active');\r\n}\r\n\r\n/**\r\n * Create new post\r\n */\r\nfunction createPost(): void {\r\n\tconst index = GAME.selectedNewsIndex;\r\n\tconst current = GAME.news[index];\r\n\r\n\tGAME.started = true;\r\n\r\n\tlet selectedTheme = document.querySelector('button.active');\r\n\tif (selectedTheme === null) return;\r\n\r\n\tconst selectedNewsBlock = news.querySelector(`[news-index=\"${index}\"]`);\r\n\tif (selectedNewsBlock) selectedNewsBlock.classList.add('posted');\r\n\r\n\t// Penguin Animation\r\n\tconst player = GAME.penguins.find(entity => entity.type === 'player') as Player;\r\n\tplayer.state = 'speaking';\r\n\tplayer.speakFrame = 0;\r\n\r\n\t// Fake content check\r\n\tif (current.fake) {\r\n\t\tplaySirenSound();\r\n\t\t\r\n\t\t// Make penguins angry\r\n\t\tGAME.penguins.forEach(penguin => {\r\n\t\t\tif (penguin.type !== 'penguin') return;\r\n\t\t\tif (penguin.state !== 'walking') return;\r\n\t\t\tpenguin.mood = 'angry';\r\n\t\t});\r\n\t\t\r\n\t\tGAME.relevance -= (GAME.coefficents.relevanceDeduction * 10);\r\n\t\treturn;\r\n\t}\r\n\r\n\t// If theme is incorrect\r\n\tif (current.theme !== selectedTheme.id) return;\r\n\t\r\n\t// Validate mood\r\n\tlet addition: number = GAME.coefficents.relevanceAddition;\r\n\tconst moods = GAME.moods;\r\n\tconst moodValue: number = parseInt(mood.value);\r\n\tconst maxBoundary = moods[current.theme] + 1;\r\n\tconst minBoundary = moods[current.theme] - 1;\r\n\r\n\t// Lower addition if invalid mood\r\n\tif (moodValue >= minBoundary && moodValue <= maxBoundary) {\r\n\t\taddition *= 0.75;\r\n\t}\r\n\r\n\t// Add score\r\n\tGAME.relevance += addition;\r\n\tGAME.score += addition;\r\n}\r\n\r\n/**\r\n * Next news block\r\n */\r\nfunction nextNewsBlock() {\r\n\tconst index = GAME.newsIndex;\r\n\tconst current = GAME.news[index];\r\n\r\n\tconst blockOld = news.querySelector('.old');\r\n\tif (blockOld) blockOld.remove();\r\n\r\n\tconst blockOne = news.querySelector('.block.one');\r\n\tif (blockOne) {\r\n\t\tblockOne.classList.remove('one');\r\n\t\tblockOne.classList.add('old');\r\n\t}\r\n\r\n\tconst blockTwo = news.querySelector('.block.two');\r\n\tif (blockTwo) {\r\n\t\tblockTwo.classList.add('one');\r\n\t\tblockTwo.classList.remove('two');\r\n\t}\r\n\r\n\tconst blockThree = news.querySelector('.block.three');\r\n\tif (blockThree) {\r\n\t\tblockThree.classList.add('two');\r\n\t\tblockThree.classList.remove('three');\r\n\t}\r\n\r\n\t// Create next post\r\n\tconst blockNew = document.createElement('div');\r\n\tblockNew.className = 'block new';\r\n\tblockNew.setAttribute('news-index', `${index}`);\r\n\r\n\tconst title = document.createElement('h3');\r\n\ttitle.innerText = current.title;\r\n\r\n\tconst content = document.createElement('p');\r\n\tcontent.innerText = current.content;\r\n\r\n\t// Build element\r\n\tblockNew.appendChild(title);\r\n\tblockNew.appendChild(content);\r\n\tnews.appendChild(blockNew);\r\n\r\n\t// Make new block\r\n\twindow.requestAnimationFrame(() => {\r\n\t\tblockNew.className = 'block three';\r\n\t\tblockNew.onclick = () => {\r\n\t\t\tGAME.selectedNewsIndex = index;\r\n\t\t\tshowPostModal();\r\n\t\t\tplayClickSound();\r\n\t\t};\r\n\t});\r\n\r\n\tGAME.newsIndex += 1;\r\n\tif (GAME.newsIndex >= GAME.news.length) GAME.newsIndex = 0;\r\n}\r\n\r\n/**\r\n * Show post creating modal\r\n */\r\nfunction showPostModal(): void {\r\n\tconst index = GAME.selectedNewsIndex;\r\n\tconst current = GAME.news[index];\r\n\r\n\t// Create post element\r\n\tconst blockNew = document.createElement('div');\r\n\tblockNew.className = 'block new';\r\n\tconst title = document.createElement('h3');\r\n\ttitle.innerText = current.title;\r\n\tconst content = document.createElement('p');\r\n\tcontent.innerText = current.content;\r\n\r\n\tblockNew.appendChild(title);\r\n\tblockNew.appendChild(content);\r\n\r\n\tselectedNews.innerHTML = '';\r\n\tselectedNews.appendChild(blockNew);\r\n\r\n\tpostButton.disabled = true;\r\n\tpostModal.style.top = '32px';\r\n\toverlay.style.opacity = '1';\r\n\toverlay.style.pointerEvents = 'auto';\r\n\tGAME.paused = true;\r\n}\r\n\r\n/**\r\n * Hide post creating modal\r\n */\r\nfunction hideModals(): void {\r\n\tpostButton.disabled = true;\r\n\tpostModal.style.top = '100%';\r\n\toverlay.style.opacity = '0';\r\n\tpauseMenu.style.display = 'none';\r\n\toverlay.style.pointerEvents = 'none';\r\n\tGAME.paused = false;\r\n\tunpressButtons();\r\n}\r\n","// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n","import { State, GameState } from '../state';\r\nimport { requestTimeout } from '../timers';\r\nimport { convertRange, loadImage, numberWithCommas, lerp, randomInteger } from '../utils';\r\n\r\n// Sprites\r\nimport fishImage from '../../sprites/fish-shadow.png';\r\n\r\n// Sounds\r\nimport { playPopSound } from '../audio';\r\n\r\n// Preload images\r\nconst fish = loadImage(fishImage);\r\n\r\n// Global game state\r\nconst GAME: GameState = State();\r\n\r\n// Element\r\nconst fishCounter = document.getElementById('fish');\r\n\r\nexport class Fish {\r\n\tpublic readonly type = 'fish';\r\n\tpublic readonly spriteHeight = 92;\r\n\tpublic readonly spriteWidth = 92;\r\n\r\n\tpublic collected: boolean;\r\n\r\n\tpublic exists: boolean;\r\n\tpublic frame: number;\r\n\r\n\tpublic y: number;\r\n\tpublic x: number;\r\n\r\n\tpublic width: number;\r\n\tpublic height: number;\r\n\r\n\tpublic spawnY: number;\r\n\r\n\t/**\r\n\t * Billboard initialization\r\n\t */\r\n\tconstructor(x: number, y: number) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.spawnY = y;\r\n\t\tthis.frame = 0;\r\n\t\tthis.exists = true;\r\n\t\tthis.collected = false;\r\n\t\tthis.width = this.spriteWidth;\r\n\t\tthis.height = this.spriteHeight;\r\n\r\n\t\tif (this.x < 128) this.x = 128;\r\n\t\tif (this.x > GAME.element.width - 128) this.x = GAME.element.width - 128;\r\n\t}\r\n\r\n\t/**\r\n\t * Draw sprite on canvas\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tconst ctx = GAME.ctx;\r\n\r\n\t\tif (this.exists === false) return;\r\n\r\n\t\tconst size = convertRange(this.spawnY, { min: 0, max: GAME.element.height }, { min: 0, max: 2 });\r\n\t\tconst posY: number = convertRange(\r\n\t\t\tthis.y,\r\n\t\t\t{ min: 0, max: GAME.element.height },\r\n\t\t\t{ min: GAME.element.height / 5, max: GAME.element.height }\r\n\t\t);\r\n\r\n\t\tctx.save();\r\n\t\tctx.translate(this.x, posY);\r\n\t\tctx.scale(size, size);\r\n\t\tctx.drawImage(fish, -(this.width / 2), -(this.height / 2), this.width, this.height);\r\n\t\tctx.restore();\r\n\t}\r\n\r\n\t/**\r\n\t * Update billboard state\r\n\t */\r\n\tpublic update(): void {\r\n\t\tif (this.exists === false) return;\r\n\r\n\t\t// Next frame\r\n\t\tthis.frame += 1;\r\n\r\n\t\t// If not collected\r\n\t\tif (!this.collected) {\r\n\t\t\t// Spawn animation\r\n\t\t\tif (this.frame < 50) {\r\n\t\t\t\tconst posY: number = convertRange(\r\n\t\t\t\t\tthis.spawnY - 512,\r\n\t\t\t\t\t{ min: 0, max: GAME.element.height },\r\n\t\t\t\t\t{ min: GAME.element.height / 5, max: GAME.element.height }\r\n\t\t\t\t);\r\n\t\t\t\tthis.y = lerp(this.y, posY, 0.05);\r\n\t\t\t}\r\n\r\n\t\t\t// Despawn\r\n\t\t\tif (this.frame > GAME.coefficents.fishDespawnFrames) {\r\n\t\t\t\tthis.width = lerp(this.width, 0, 0.2);\r\n\t\t\t\tthis.height = lerp(this.height, 0, 0.2);\r\n\t\t\t\tif (this.width < 16) this.exists = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Check mouse collision\r\n\t\t\tif (GAME.mouseX <= this.x + 48 && GAME.mouseX >= this.x - 48) {\r\n\t\t\t\tthis.collected = true;\r\n\t\t\t\tplayPopSound();\r\n\t\t\t} else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Size animation\r\n\t\tif (this.y < 64) {\r\n\t\t\tthis.width = lerp(this.width, 0, 0.1);\r\n\t\t\tthis.height = lerp(this.height, 0, 0.1);\r\n\t\t}\r\n\r\n\t\t// Change position\r\n\t\tconst posX = GAME.element.width / 2;\r\n\t\tconst posY = 0 - GAME.element.height / 5;\r\n\t\tthis.x = lerp(this.x, posX, 0.1);\r\n\t\tthis.y = lerp(this.y, posY, 0.1);\r\n\r\n\t\tif (this.width < 16) {\r\n\t\t\tthis.exists = false;\r\n\t\t\tGAME.fish += 1;\r\n\r\n\t\t\t// Counter animation\r\n\t\t\tfishCounter.className = 'added';\r\n\t\t\trequestTimeout(() => {\r\n\t\t\t\tfishCounter.className = '';\r\n\t\t\t}, 10);\r\n\t\t}\r\n\t}\r\n}\r\n","import { Fish } from './fish';  \r\n\r\nimport { State, GameState } from '../state';\r\nimport { convertRange, lerp, loadImage, randomInteger } from '../utils';\r\n\r\n// Sprites\r\nimport penguinLeftImage from '../../sprites/penguin-left.png';\r\nimport penguinRightImage from '../../sprites/penguin-right.png';\r\nimport angryPenguinLeftImage from '../../sprites/penguin-left-angry.png';\r\nimport anrgyPenguinRightImage from '../../sprites/penguin-right-angry.png';\r\nimport boredPenguinLeftImage from '../../sprites/penguin-left-bored.png';\r\nimport boredPenguinRightImage from '../../sprites/penguin-right-bored.png';\r\n\r\n\r\n// Preload images\r\nconst penguinLeft = loadImage(penguinLeftImage);\r\nconst penguinRight = loadImage(penguinRightImage);\r\nconst angryPenguinLeft = loadImage(angryPenguinLeftImage);\r\nconst angryPenguinRight = loadImage(anrgyPenguinRightImage);\r\nconst boredPenguinLeft = loadImage(boredPenguinLeftImage);\r\nconst boredPenguinRight = loadImage(boredPenguinRightImage);\r\n\r\n// Global game state\r\nconst GAME: GameState = State();\r\n\r\nexport class Penguin {\r\n\tpublic readonly type = 'penguin';\r\n\tpublic readonly spriteHeight = 92;\r\n\tpublic readonly spriteWidth = 92;\r\n\r\n\tpublic involvment: number;\r\n\tpublic exists: boolean;\r\n\t\r\n\tpublic mood: 'normal' | 'bored' | 'angry';\r\n\tpublic state: 'spawning' | 'walking' | 'leaving';\r\n\tpublic direction: 'left' | 'right';\r\n\r\n\tpublic angryFrame: number;\r\n\tpublic spawnFrame: number;\r\n\tpublic frame: number;\r\n\tpublic x: number;\r\n\tpublic y: number;\r\n\r\n\tpublic width: number;\r\n\tpublic height: number;\r\n\r\n\tconstructor(x: number, y: number) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\tthis.state = 'spawning';\r\n\t\tthis.frame = randomInteger(0, 20);\r\n\t\tthis.direction = randomInteger(0, 1) ? 'left' : 'right';\r\n\r\n\t\tthis.mood = 'normal';\r\n\t\tthis.width = this.spriteWidth / 2;\r\n\t\tthis.height = 0;\r\n\t\tthis.exists = true;\r\n\t\tthis.involvment = randomInteger(75, 125);\r\n\t\tthis.spawnFrame = randomInteger(0, 200);\r\n\t}\r\n\r\n\t/**\r\n\t * Draw penguin\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tconst ctx = GAME.ctx;\r\n\r\n\t\tif (!GAME.started) return;\r\n\r\n\t\t// Remove if its unmounted\r\n\t\tif (!this.exists) return;\r\n\r\n\t\tlet sprite = this.direction === 'left' ? penguinLeft : penguinRight;\r\n\t\tconst size = convertRange(this.y, { min: 0, max: GAME.element.height }, { min: 0, max: 2 });\r\n\t\tconst posY = convertRange(this.y, { min: 0, max: GAME.element.height }, { min: GAME.element.height / 5, max: GAME.element.height });\r\n\r\n\t\t// Bored sprite\r\n\t\tif (this.mood === 'bored') {\r\n\t\t\tsprite = this.direction === 'left' ? boredPenguinLeft : boredPenguinRight;\r\n\t\t}\r\n\t\t\r\n\t\t// Angry sprite\r\n\t\tif (this.mood === 'angry') {\r\n\t\t\tsprite = this.direction === 'left' ? angryPenguinLeft : angryPenguinRight;\r\n\t\t}\r\n\r\n\t\t// Skip drawing if its reversed\r\n\t\tif (size < 0) return;\r\n\r\n\t\tctx.save();\r\n\t\tctx.translate(this.x, posY);\r\n\t\tctx.scale(size, size);\r\n\t\tctx.drawImage(sprite, -(this.width / 2), -this.height + 18, this.width, this.height);\r\n\t\tctx.restore();\r\n\t}\r\n\r\n\t/**\r\n\t * Update penguin state\r\n\t */\r\n\tpublic update(): void {\r\n\t\tconst width: number = GAME.element.width;\r\n\t\tconst height: number = GAME.element.height;\r\n\r\n\t\tif (!GAME.started) return;\r\n\r\n\t\t// Remove if its unmounted\r\n\t\tif (!this.exists) return;\r\n\r\n\t\t// Lower involvement\r\n\t\tthis.involvment -= GAME.coefficents.penguinsInvolvment;\r\n\r\n\t\t// Lower involvement one more time\r\n\t\tif (this.mood === 'angry') this.involvment -= 1;\r\n\r\n\t\t// If penguin is not involved\r\n\t\tif (this.involvment <= 0) this.state = 'leaving';\r\n\r\n\t\t// Spawn fish\r\n\t\tif (this.spawnFrame === 100 && this.state === 'walking' && this.mood === 'normal') {\r\n\t\t\tconst fish = new Fish(this.x, this.y - 1);\r\n\t\t\tGAME.entities.push(fish);\r\n\t\t}\r\n\r\n\t\t// Update frame\r\n\t\tthis.frame += 1;\r\n\t\tif (this.frame > 20) this.frame = 0;\r\n\r\n\t\t// Update spawn frame\r\n\t\tthis.spawnFrame += 1;\r\n\t\tif (this.spawnFrame > 100) {\r\n\t\t\tthis.spawnFrame = 0;\r\n\t\t\tthis.mood = 'normal';\r\n\t\t}\r\n\r\n\t\tthis.angryFrame += 1;\r\n\t\tif (this.angryFrame > 100) {\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t// Change mood to border\r\n\t\tif (this.involvment < 20 && this.mood === 'normal') this.mood = 'bored';\r\n\r\n\t\t// If walking\r\n\t\tif (this.state === 'walking') {\r\n\t\t\tthis.height = this.frame >= 10 ? lerp(this.height, this.spriteHeight - 24, 0.3) : lerp(this.height, this.spriteHeight + 4, 0.3);\r\n\t\t\tthis.width = this.frame >= 10 ? lerp(this.width, this.spriteWidth + 16, 0.2) : lerp(this.width, this.spriteWidth - 4, 0.2);\r\n\r\n\t\t\tif (this.direction === 'left') {\r\n\t\t\t\tthis.x -= convertRange(this.y, { min: 0, max: height }, { min: 0, max: 2 });\r\n\t\t\t\tif (this.x <= -this.width) this.x = width + this.width;\r\n\t\t\t} else {\r\n\t\t\t\tthis.x += convertRange(this.y, { min: 0, max: height }, { min: 0, max: 2 });\r\n\t\t\t\tif (this.x >= width + this.width) this.x = -this.width;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Spawning penguin\r\n\t\tif (this.state === 'spawning') {\r\n\t\t\tthis.width = lerp(this.width, this.spriteWidth, 0.1);\r\n\t\t\tthis.height = lerp(this.height, this.spriteHeight, 0.1) + 0.1;\r\n\t\t\tif (this.height >= this.spriteHeight) {\r\n\t\t\t\tthis.state = 'walking';\r\n\t\t\t\tthis.width = this.spriteWidth;\r\n\t\t\t\tthis.height = this.spriteHeight;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Removing penguin\r\n\t\tif (this.state === 'leaving') {\r\n\t\t\tthis.width = lerp(this.width, 0, 0.05);\r\n\t\t\tthis.height = lerp(this.height, 0, 0.1) - 0.05;\r\n\t\t\tif (this.height <= 10) this.exists = false;\r\n\t\t}\r\n\t}\r\n}\r\n","import { State, GameState } from '../state';\r\nimport { convertRange, loadImage, lerp } from '../utils';\r\n\r\n// Sprites\r\nimport stoneImage from '../../sprites/stone.png';\r\nimport penguinAnthenaImage from '../../sprites/penguin-anthena.png';\r\nimport mainPenguinImage from '../../sprites/main-penguin.png';\r\nimport mainPenguinLoudspeakerImage from '../../sprites/main-penguin-loudspeaker.png';\r\n\r\n// Sounds\r\nimport { playSpeachSound } from '../audio';\r\n\r\n// Preload images\r\nconst stone = loadImage(stoneImage);\r\nconst anthenaPenguin = loadImage(penguinAnthenaImage);\r\nconst mainPenguin = loadImage(mainPenguinImage);\r\nconst mainPenguinLoudspeaker = loadImage(mainPenguinLoudspeakerImage);\r\n\r\n// Global game state\r\nconst GAME: GameState = State();\r\n\r\nexport class Player {\r\n\tpublic readonly type = 'player';\r\n\tpublic readonly stoneSpriteHeight = 400;\r\n\tpublic readonly stoneSpriteWidth = 400;\r\n\tpublic readonly penguinSpriteHeight = 98;\r\n\tpublic readonly penguinSpriteWidth = 98;\r\n\tpublic readonly penguinOffsetX = 48;\r\n\tpublic readonly penguinOffsetY = -50;\r\n\r\n\tpublic readonly anthenaPenguinSpriteHeight = 98;\r\n\tpublic readonly anthenaPenguinSpriteWidth = 98;\r\n\tpublic readonly anthenaPenguinOffsetX = 85;\r\n\tpublic readonly anthenaPenguinOffsetY = -232;\r\n\r\n\tpublic state: 'idle' | 'speaking';\r\n\tpublic frame: number;\r\n\tpublic speakFrame: number;\r\n    public anthenaFrame: number;\r\n\r\n\tpublic exists: boolean;\r\n\tpublic x: number;\r\n\tpublic y: number;\r\n\tpublic width: number;\r\n\tpublic height: number;\r\n\r\n\tpublic anthenaWidth: number;\r\n\tpublic anthenaHeight: number;\r\n\r\n\t/**\r\n\t * Player initialization\r\n\t */\r\n\tconstructor() {\r\n\t\tthis.x = GAME.element.width / 2;\r\n\t\tthis.y = GAME.element.height / 1.75;\r\n\t\tthis.width = this.penguinSpriteWidth;\r\n\t\tthis.height = this.penguinSpriteHeight;\r\n\t\tthis.exists = true;\r\n\t\tthis.frame = 0;\r\n\t\tthis.speakFrame = 0;\r\n        this.state = 'idle';\r\n        this.anthenaFrame = 0;\r\n\t\tthis.anthenaWidth = this.anthenaPenguinSpriteWidth;\r\n\t\tthis.anthenaHeight = this.anthenaPenguinSpriteHeight;\r\n\t}\r\n\r\n\t/**\r\n\t * Draw sprite on canvas\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tconst ctx = GAME.ctx;\r\n\r\n\t\tconst size = convertRange(this.y, { min: 0, max: GAME.element.height }, { min: 0, max: 2 });\r\n\t\tconst posY = convertRange(this.y, { min: 0, max: GAME.element.height }, { min: GAME.element.height / 5, max: GAME.element.height });\r\n\t\tconst sprite = this.state === 'speaking' ? mainPenguinLoudspeaker : mainPenguin;\r\n\r\n\t\tctx.save();\r\n\t\tctx.translate(this.x, posY);\r\n\t\tctx.scale(size, size);\r\n\t\tctx.drawImage(stone, -(this.stoneSpriteWidth / 2), -this.stoneSpriteHeight + 48, this.stoneSpriteWidth, this.stoneSpriteHeight);\r\n\r\n\t\tctx.drawImage(\r\n\t\t\tanthenaPenguin,\r\n\t\t\t-(this.anthenaWidth / 2) + this.anthenaPenguinOffsetX,\r\n\t\t\t-(this.anthenaHeight + 16) + this.anthenaPenguinOffsetY,\r\n\t\t\tthis.anthenaWidth,\r\n\t\t\tthis.anthenaHeight\r\n\t\t);\r\n\r\n\t\tctx.drawImage(sprite, -(this.width / 2) + this.penguinOffsetX, -(this.height + 16) + this.penguinOffsetY, this.width, this.height);\r\n\t\tctx.restore();\r\n\t}\r\n\r\n\t/**\r\n\t * Update player state\r\n\t */\r\n\tpublic update(): void {\r\n\t\tthis.x = Math.floor(GAME.element.width / 2);\r\n\t\tthis.y = Math.floor(GAME.element.height / 1.75);\r\n\r\n\t\t// Frame update\r\n\t\tthis.frame += 1;\r\n\t\tif (this.frame > 100) {\r\n\t\t\tthis.frame = 0;\r\n        }\r\n\r\n        // Athena character frame update\r\n\t\tthis.anthenaFrame += 1;\r\n\t\tif (this.anthenaFrame > 60) {\r\n\t\t\tthis.anthenaFrame = 0;\r\n        }\r\n\r\n        // Anthena character\r\n        if (this.anthenaFrame > 30) {\r\n            this.anthenaHeight = lerp(this.anthenaHeight, this.anthenaPenguinSpriteHeight - 16, 0.1);\r\n            this.anthenaWidth = lerp(this.anthenaWidth, this.anthenaPenguinSpriteWidth + 16, 0.1);\r\n        } else {\r\n            this.anthenaHeight = lerp(this.anthenaHeight, this.anthenaPenguinSpriteHeight, 0.1);\r\n            this.anthenaWidth = lerp(this.anthenaWidth, this.anthenaPenguinSpriteWidth, 0.1);\r\n        }\r\n\r\n\t\t// Idle state\r\n\t\tif (this.state === 'idle') {\r\n\t\t\tif (this.frame > 50) {\r\n\t\t\t\tthis.height = lerp(this.height, this.penguinSpriteHeight, 0.05);\r\n\t\t\t\tthis.width = lerp(this.width, this.penguinSpriteWidth, 0.05);\r\n\t\t\t} else {\r\n\t\t\t\tthis.height = lerp(this.height, this.penguinSpriteHeight - 16, 0.05);\r\n\t\t\t\tthis.width = lerp(this.width, this.penguinSpriteWidth + 8, 0.05);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Speaking animation\r\n\t\tif (this.state === 'speaking') {\r\n\t\t\tthis.frame += 8;\r\n\t\t\tthis.speakFrame += 1;\r\n\r\n            if (this.speakFrame === 1) playSpeachSound();\r\n            \r\n\t\t\tif (this.frame > 50) {\r\n\t\t\t\tthis.height = lerp(this.height, this.penguinSpriteHeight + 16, 0.1);\r\n\t\t\t\tthis.width = lerp(this.width, this.penguinSpriteWidth - 8, 0.1);\r\n\t\t\t} else {\r\n\t\t\t\tthis.height = lerp(this.height, this.penguinSpriteHeight - 32, 0.1);\r\n\t\t\t\tthis.width = lerp(this.width, this.penguinSpriteWidth + 16, 0.1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Stop speaking after some frames\r\n\t\tif (this.speakFrame > 100) {\r\n\t\t\tthis.speakFrame = 0;\r\n\t\t\tthis.state = 'idle';\r\n\t\t}\r\n\t}\r\n}\r\n","import Stats from 'stats.js';\r\nimport { State, GameState } from './state';\r\nimport { requestInterval } from './timers';\r\nimport { randomInteger, insertionSort } from './utils';\r\nimport { startMusic } from './audio';\r\n\r\nimport { levels } from '../coefficents.json';\r\n\r\n// Entities\r\nimport { Penguin } from './entities/penguin';\r\nimport { Player } from './entities/player';\r\n\r\n// Stats setup\r\nconst stats = new Stats();\r\nstats.showPanel(0);\r\nif (process.env.NODE_ENV === 'development') document.body.appendChild(stats.dom);\r\n\r\n// Get state\r\nconst GAME: GameState = State();\r\n\r\n// Spawn main penguin player\r\nconst player = new Player();\r\nGAME.penguins.push(player);\r\n\r\n// Spawn penguins\r\nfor (let i = 0; i < 10; i++) {\r\n\tconst x = randomInteger(0, GAME.element.width);\r\n\tconst y = randomInteger(GAME.element.height / 3, GAME.element.height - 64);\r\n\tconst penguin = new Penguin(x, y);\r\n\tGAME.penguins.push(penguin);\r\n}\r\n\r\n// Sort penguins\r\ninsertionSort(GAME.penguins, 'y');\r\n\r\n// Main loop\r\nfunction loop() {\r\n\t// If game paused\r\n\tif (GAME.paused) {\r\n\t\twindow.requestAnimationFrame(loop);\r\n\t\treturn;\r\n\t}\r\n\r\n\t//Game ends\r\n\tif (checkEnd()) {\t\r\n\r\n\t\tGAME.paused = true;\r\n\r\n\t\tdocument.getElementById('final-fish-count').innerText = `${GAME.fish}`;\r\n\t\tdocument.getElementById('end-screen').style.transform = 'translate( -50%, -50%)';\r\n\r\n\t\toverlay.style.opacity = '1';\r\n\t\toverlay.style.pointerEvents = 'auto';\r\n\t\treturn;\r\n\t}\r\n\r\n\tstats.begin();\r\n\r\n\t// Update entities\r\n\tfor (let i = 0; i < GAME.penguins.length; i++) GAME.penguins[i].update();\r\n\tfor (let i = 0; i < GAME.entities.length; i++) GAME.entities[i].update();\r\n\r\n\t// Remove all deleted entities\r\n\tGAME.penguins = GAME.penguins.filter(entity => entity.exists);\r\n\tGAME.entities = GAME.entities.filter(entity => entity.exists);\r\n\r\n\t// Clean screen\r\n\tGAME.ctx.clearRect(0, 0, GAME.element.width, GAME.element.height);\r\n\r\n\t// Draw entities\r\n\tfor (let i = 0; i < GAME.penguins.length; i++) GAME.penguins[i].draw();\r\n\tfor (let i = 0; i < GAME.entities.length; i++) GAME.entities[i].draw();\r\n\r\n\r\n\tstats.end();\r\n\twindow.requestAnimationFrame(loop);\r\n}\r\n\r\n// Relevance update\r\nrequestInterval(() => {\r\n\tif (!GAME.started) return;\r\n\r\n\tGAME.relevance -= GAME.coefficents.relevanceDeduction;\r\n\tif (GAME.relevance > 1.5) GAME.relevance -= GAME.coefficents.relevanceDeduction;\r\n\t\r\n\tif (GAME.relevance < 0) GAME.relevance = 0;\r\n\tif (GAME.relevance > 2) GAME.relevance = 2;\r\n}, 1000);\r\n\r\n// Spawn penguins\r\nrequestInterval(() => {\r\n\tif (!GAME.started) return;\r\n\tconst penguinsAmount = GAME.penguins.length - 1;\r\n\r\n\t// Calculate amount of penguins to spawn\r\n\tlet toSpawn = Math.ceil(penguinsAmount * GAME.coefficents.penguinsMultiplier);\r\n\tif (GAME.relevance > 1.5) toSpawn += 1;\r\n\r\n\t// Skip spawning if too much penguins\r\n\tif (penguinsAmount > GAME.coefficents.maximumPenguins) return;\r\n\r\n\t// Spawn penguins\r\n\tfor (let i = 0; i < toSpawn; i++) {\r\n\t\tconst x = randomInteger(0, GAME.element.width);\r\n\t\tconst y = randomInteger(GAME.element.height / 4, GAME.element.height - 64);\r\n\t\tconst penguin = new Penguin(x, y);\r\n\t\tGAME.penguins.push(penguin);\t\t\r\n\t}\r\n\r\n\t// Depth sort\r\n\tinsertionSort(GAME.penguins, 'y');\r\n}, 1000);\r\n\r\n// Update coefficents\r\nrequestInterval(() => {\r\n\tconst score = GAME.score;\r\n\t\r\n\tfor (let i = 0; i < levels.length; i++) {\r\n\t\tconst level = levels[i];\r\n\t\r\n\t\tif (level.score <= score) {\r\n\t\t\tGAME.level = level.level;\r\n\t\t\tGAME.coefficents.relevanceDeduction = level.relevanceDeduction;\r\n\t\t\tGAME.coefficents.relevanceAddition = level.relevanceAddition;\r\n\t\t\tGAME.coefficents.maximumPenguins = level.maximumPenguins;\r\n\t\t\tGAME.coefficents.penguinsMultiplier = level.penguinsMultiplier;\r\n\t\t\tGAME.coefficents.penguinsInvolvment = level.penguinsInvolvment;\r\n\t\t\tGAME.coefficents.newsUpadateDelay = level.newsUpadateDelay;\r\n\t\t\tGAME.coefficents.fishDespawnFrames = level.fishDespawnFrames;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tbreak;\r\n\t}\r\n\r\n\tconsole.log(GAME.level, GAME.score);\r\n\r\n}, 1000);\r\n\r\nconst overlay = document.getElementById('overlay');\r\noverlay.style.opacity = '1';\r\n\r\n//starts the game\r\ndocument.getElementById('start-button').onclick = () => {\r\n\tloop();\r\n\tstartMusic();\r\n\tGAME.paused = false;\r\n\toverlay.style.opacity = '0';\r\n\tdocument.getElementById('start-menu').remove();\r\n};\r\n\r\n//reload button on screen\r\ndocument.getElementById('end-button').onclick = () => {\r\n\tlocation.reload();\r\n};\r\n\r\nfunction checkEnd(){\r\n\tif ((GAME.penguins.length - 1) === 0 || GAME.relevance === 0 ) {\r\n\t\treturn true;\r\n\t}\r\n }\r\n","import { randomInteger, loadImage, convertRange, insertionSort } from './utils';\r\n\r\n// Images\r\nimport img1 from '../sprites/gaming.png';\r\nimport img2 from '../sprites/Educational.png';\r\nimport img3 from '../sprites/films.png';\r\nimport img4 from '../sprites/Music.png';\r\nimport img5 from '../sprites/politics.png';\r\nimport img6 from '../sprites/sport.png';\r\n\r\ninterface Faller\r\n{\r\n    x: number;\r\n    y: number;\r\n    // Larger the depth: lesser the speed, lesser the scale\r\n    depth: number;\r\n    // Image of that index will be used from `images` array\r\n    imageIndex: number;\r\n    // Current rotation\r\n    rot: number;\r\n    // Angular speed\r\n    rotSpeed: number;\r\n    // Image width and height\r\n    width: number;\r\n    height: number;\r\n}\r\n\r\nenum FALLER_CFG \r\n{\r\n    FrontSpeed = 2,\r\n    BackSpeed = 1,\r\n    FrontScale = 0.8,\r\n    BackScale = 0.4,\r\n    TopDownScaleDiff = 0.3,\r\n    MaxRotSpeed = 0.010,\r\n    MinRotSpeed = 0.004,\r\n    TotalFallers = 25,\r\n}\r\n\r\nfunction randomFloat (min: number, max: number): number\r\n{\r\n    return Math.random() * (max - min) + min;\r\n}\r\n\r\nfunction unitRangeToRange (value: number, min: number, max: number): number\r\n{\r\n    return convertRange(value, { min: 0, max: 1 }, { min: min, max: max });\r\n}\r\n\r\nexport default class FallersRain\r\n{\r\n    private ctx: CanvasRenderingContext2D;\r\n\r\n    private finished: boolean;\r\n\r\n    private fallers: Faller[] = [];\r\n    private images: HTMLImageElement[] = [];\r\n\r\n    private imagesToLoad: number;\r\n\r\n    public constructor(canvas: HTMLCanvasElement)\r\n    {\r\n        requestAnimationFrame(this.loop);\r\n\r\n        // If this.loop (from requestAnimationFrame) will run when `finished=true`, the animation will be finished (loop won't loop anymore)\r\n        this.finished = false;\r\n\r\n        // Resize canvas, get ctx\r\n        canvas = canvas;\r\n        canvas.width = window.innerWidth * window.devicePixelRatio;\r\n        canvas.height = window.innerHeight * window.devicePixelRatio;\r\n        this.ctx = canvas.getContext('2d');\r\n        \r\n        // Load images\r\n        this.imagesToLoad = 0;\r\n        this.loadImages(img1, img2, img3, img4, img5, img6);\r\n\r\n    }\r\n\r\n    private spawnFallers ()\r\n    {\r\n        \r\n        for (let i = 0; i < FALLER_CFG.TotalFallers; i++)\r\n        {\r\n            let faller = this.createFaller(false, i);\r\n            this.fallers.push(faller);\r\n        }\r\n\r\n        insertionSort(this.fallers, 'depth');\r\n        this.fallers.reverse();\r\n    }\r\n\r\n    private loadImages (...imagePaths: string[])\r\n    {\r\n        imagePaths.forEach(path =>\r\n        {\r\n            this.imagesToLoad++;\r\n\r\n            let img = loadImage(path);\r\n            this.images.push(img);\r\n\r\n            console.log(`New image starts loading. ${this.imagesToLoad} images to be load.`);\r\n\r\n            img.addEventListener('load', () => {\r\n                this.imagesToLoad--;\r\n                console.log(`Image loaded. ${this.imagesToLoad} images remain.`);\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    private createFaller (fromTop: boolean = false, index: number): Faller\r\n    {\r\n        let randomImageIndex = randomInteger(0, this.images.length - 1);\r\n        let imageWidth = this.images[randomImageIndex].width;\r\n        let imageHeight = this.images[randomImageIndex].height;\r\n\r\n        let canvas = this.ctx.canvas;\r\n\r\n        let maxX = canvas.width - imageWidth - 1;\r\n        let minX = 0;\r\n        let maxY = canvas.height - imageHeight - 1;\r\n        let minY = -imageHeight;\r\n\r\n        let total1D = Math.floor(Math.sqrt(FALLER_CFG.TotalFallers));\r\n        let x = ( (maxX-minX) / total1D) * (index % total1D + randomFloat(0, 1)) + minX\r\n        let y = ( (maxY-minY) / total1D) * (index / total1D + randomFloat(0, 1)) + minY\r\n        y = fromTop ? minY : y;\r\n\r\n        let initialRot = randomInteger(0, Math.PI * 2);\r\n\r\n        let faller: Faller = {\r\n            x: x,\r\n            y: y,\r\n            depth: Math.random(),\r\n            imageIndex: randomImageIndex,\r\n            rot: initialRot,\r\n            rotSpeed: randomFloat(FALLER_CFG.MinRotSpeed, FALLER_CFG.MaxRotSpeed),\r\n            width: imageWidth,\r\n            height: imageHeight,\r\n        }\r\n\r\n        return faller;\r\n    }\r\n\r\n    public loop = () =>\r\n    {\r\n        console.log('loop()');\r\n\r\n        // Finish the loop if `this.finished == true`. ADDED: also auto-finishes when canvas is removed from the DOM\r\n        if (this.finished || (this.ctx.canvas.id !== '' && !document.getElementById(this.ctx.canvas.id)))\r\n        {\r\n            return;\r\n        }\r\n        \r\n        this.update();\r\n        \r\n        requestAnimationFrame(this.loop);\r\n    }\r\n\r\n    private update ()\r\n    {\r\n        // Spawn fallers when all images are loaded\r\n        if (this.imagesToLoad <= 0 && this.fallers.length === 0)\r\n        {\r\n            this.spawnFallers();\r\n        }\r\n\r\n        // console.log('update()');\r\n\r\n        let ctx = this.ctx;\r\n\r\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n        this.fallers.forEach((faller, index) =>\r\n        {\r\n            let speed = unitRangeToRange(faller.depth, FALLER_CFG.FrontSpeed, FALLER_CFG.BackSpeed);\r\n            let scale = unitRangeToRange(faller.depth, FALLER_CFG.FrontScale, FALLER_CFG.BackScale)\r\n                + convertRange(faller.y, { min: 0, max: ctx.canvas.height }, { min: FALLER_CFG.TopDownScaleDiff / 2, max: -FALLER_CFG.TopDownScaleDiff / 2 });\r\n\r\n            faller.y += speed;\r\n            if (faller.y > this.ctx.canvas.height)\r\n            {\r\n                this.fallers[index] = this.createFaller(true, index);\r\n                this.fallers[index].depth = faller.depth;\r\n            }\r\n\r\n            faller.rot += faller.rotSpeed;\r\n\r\n            ctx.save();\r\n            ctx.translate(faller.x + faller.width/2, faller.y + faller.height/2);\r\n            ctx.rotate(faller.rot);\r\n            ctx.scale(scale, scale);\r\n            ctx.drawImage(this.images[faller.imageIndex], -faller.width/2, -faller.height/2);\r\n            ctx.restore();\r\n        });\r\n    }\r\n\r\n    public finish ()\r\n    {\r\n        this.finished = true;\r\n    }\r\n\r\n}","import { State } from './core/state';\r\nimport { shuffle, insertionSort } from './core/utils';\r\n\r\n// Array of news\r\nimport { real_news, fake_news } from './content.json';\r\nimport { moods, levels } from './coefficents.json';\r\n\r\n// Setup canvas element\r\nconst stage = document.getElementById('stage') as HTMLCanvasElement;\r\nstage.width = window.innerWidth * window.devicePixelRatio;\r\nstage.height = window.innerHeight * window.devicePixelRatio;\r\n\r\n// Setup canvas context\r\nconst ctx = stage.getContext('2d');\r\n\r\n// Sort levels by their score\r\ninsertionSort(levels, 'score');\r\n\r\n// State initialization\r\nState({\r\n\tpaused: true,\r\n\telement: stage,\r\n\tctx: ctx,\r\n\r\n\tmouseX: 0,\r\n\tmouseY: 0,\r\n\tmouseDown: false,\r\n\r\n\tentities: [],\r\n\tpenguins: [],\r\n\tstarted: false,\r\n\r\n\tfish: 0,\r\n\trelevance: 1,\r\n\tscore: 0,\r\n\tlevel: 0,\r\n\r\n\tmoods: moods,\r\n\r\n\tcoefficents: {\r\n\t\trelevanceDeduction: levels[0].relevanceDeduction,\r\n\t\trelevanceAddition: levels[0].relevanceAddition,\r\n\t\tmaximumPenguins: levels[0].maximumPenguins,\r\n\t\tpenguinsMultiplier: levels[0].penguinsMultiplier,\r\n\t\tpenguinsInvolvment: levels[0].penguinsInvolvment,\r\n\t\tnewsUpadateDelay: levels[0].newsUpadateDelay,\r\n\t\tfishDespawnFrames: levels[0].fishDespawnFrames\r\n\t},\r\n\r\n\tnews: shuffle([...real_news]),\r\n\tnewsIndex: 0,\r\n\tselectedNewsIndex: 0,\r\n});\r\n\r\n// Input module\r\nimport './core/input';\r\n\r\n// Game UI\r\nimport './core/gui';\r\n\r\n// Main game code\r\nimport './core/main';\r\n\r\n// TO BE MOVED SOMEWHERE\r\nimport FallersRain from './core/FallersRain';\r\n\r\nnew FallersRain(document.getElementById('start-menu-canvas') as HTMLCanvasElement);\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}